# Courses API

Тестовое задание с API для управления БД курсов

API предоставляет методы для работы со списком курсов,
создания и изменения конкретных курсов.

## Установка и развертывание
### Установка зависимостей
Первоначально необходимо установить зависимости для данного API сервера:

-   PostgreSQL
-   Golang

### Клонирование проекта
Следующим шагом надо загрузить репозиторий проекта на свой компьютер
для последующей сборки и запуса.

```bash
$ cd $GOPATH/src
$ mkdir -p github.com/chekulaevanton/
$ cd github.com/chekulaevanton/
$ git clone https://github.com/chekulaevanton/test_task_art_for_introvert.git
$ cd test_task_art_for_introvert
```

```bash
$ go get github.com/chekulaevanton/test_task_art_for_introvert
$ cd $GOPATH/src/github.com/chekulaevanton/test_task_art_for_introvert
```

### Настройка сервера
Перед запуском необходимо настроить ``.env`` файл, указав правильные значения
адреса подключения к базе данных и адреса сервера. Для личного пользования
стоит указать параметр ``COURSE_API_DB_USER`` равным вашему имени пользователя
в системе, а параментр ``COURSE_API_POST`` на свое усмотрение, чтобы он
не конфликтовал с другими сетевыми приложениями.

Далее необходимо создать базу данных выполнив данную команду:
```bash
$ psql -f ./schema/1.sql postgres
```

### Запуск сервера
Вы можете скомпилировать самостоятельно сервер в бинарный файл,
либо воспользоваться данной командой для моментального запуска
сервера:
```bash
$ go run main.go
```
Интерфейс API будет доступен по указанному в ``.env`` файле пути.
Если файл ``.env`` отсутствует, то при запуске будут указаны стандартные
настройки для подключения к базе данных и доступа к интерфейсу сервера.
- database_username: courses_api
- server_post: 8000

В данном случае необходимо самостоятельно создать пользователя базы данных
PostgreSQL и назначить ему необходимые права доступа.


## Использование API

-   `GET /courses`
      <p>
      Возвращает список всех доступных курсов.
      Добавленные в данный момент курсы становятся
      доступными через определенное время.
      </p>

    Возвращаемые данные:

    ```json
    [
        {
            "id": 1,
            "name": "Course Name 1",
            "price_usd": 100,
            "price_rub": 5000
        },
        {
            "id": 2,
            "name": "Course Name 2",
            "price_usd": 25,
            "price_rub": 2500
        }
    ]
    ```

-   `PUT /course/id`
      <p>
      Запрос на изменение существующего курса.
      При использовании несуществующего id, создает
      курс с нужными параметрами.
      </p>

    Принимаемые параметры:

    ```json
    {
        "name": "Course Name 1",
        "price_usd": 50,
        "price_rub": 2500
    }
    ```

      <p>
      Каждое поле в данном запросе является необязательным.
      Если поле не указано или является нулевым, значение
      поля остается прежним.
      </p>

    Возвращаемые значения:

    ```json
    {
        "error": "Error Text"
    }
    ```

-   `DELETE /course/id`
      <p>
      Удаляет указанный курс. При несуществующем id
      возврщает ошибку "404 Course not found".
      </p>

    Возвращаемые значения:

    ```json
    {
        "error": "Error Text"
    }
    ```
